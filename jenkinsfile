properties([parameters([choice(choices: ['Patch','Minor','Major'], description: 'Third stage meassage', name: 'ImageTag' )])])
pipeline{
  agent any
   environment {
    DOCKERHUB_CREDENTIALS=credentials('dockerhub')
  }
  stages{
        stage('Build'){
            steps{
              script{
       def version = readFile('VERSION')
                     echo "${version}"

                     if("${ImageTag}"=="Patch"){
                      echo "This is patch version"
		      def versions = version.split('\\.')
		      def last = versions[2]
		      last = last.toInteger() + 1;
		      echo "$last"
	
		      def patch = versions[0] + '.' + versions[1]+'.'+versions[2]+1
		      echo "$patch"
		      
                     }else if("${ImageTag}"=="Minor"){

                      echo "This is minor version"
                     }else{

                      echo "This is major version"
                     }
                }    
  
           }
        }
     }
  } 
    
   //stage('Trigger ManifestUpdate') {
		//steps{
                //echo "triggering updatemanifestjob"
                //build job: 'updatepatch-file', parameters: [string(name: 'DOCKERTAG', value: env.flage)]
			//}
        //}
    
    
    
     //}  
//}
